!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.feathers=t():e.feathers=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){throw c(e)}var i=r(34),s=r(4).stripSlashes,c=r(2).convert,a=function(){function e(t){n(this,e),this.name=s(t.name),this.options=t.options,this.connection=t.connection,this.base=t.base+"/"+this.name}return e.prototype.makeUrl=function(e,t){e=e||{};var r=this.base;return void 0!==t&&null!==t&&(r+="/"+t),0!==Object.keys(e).length&&(r+="?"+i.stringify(e)),r},e.prototype.find=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.request({url:this.makeUrl(e.query),method:"GET",headers:Object.assign({},e.headers)}).catch(o)},e.prototype.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'get' can not be undefined")):this.request({url:this.makeUrl(t.query,e),method:"GET",headers:Object.assign({},t.headers)}).catch(o)},e.prototype.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({url:this.makeUrl(t.query),body:e,method:"POST",headers:Object.assign({"Content-Type":"application/json"},t.headers)}).catch(o)},e.prototype.update=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'update' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(r.query,e),body:t,method:"PUT",headers:Object.assign({"Content-Type":"application/json"},r.headers)}).catch(o)},e.prototype.patch=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===e?Promise.reject(new Error("id for 'patch' can not be undefined, only 'null' when updating multiple entries")):this.request({url:this.makeUrl(r.query,e),body:t,method:"PATCH",headers:Object.assign({"Content-Type":"application/json"},r.headers)}).catch(o)},e.prototype.remove=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?Promise.reject(new Error("id for 'remove' can not be undefined, only 'null' when removing multiple entries")):this.request({url:this.makeUrl(t.query,e),method:"DELETE",headers:Object.assign({},t.headers)}).catch(o)},e}();e.exports=a},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(14)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(t,r(6))},function(e,t,r){"use strict";function n(e,t,r,o,i){var s=void 0,c=void 0,a=void 0;(e=e||"Error")instanceof Error?(c=e.message||"Error",e.errors&&(s=e.errors)):"object"===(void 0===e?"undefined":w(e))?(c=e.message||"Error",i=e):c=e,i&&((a=JSON.parse(JSON.stringify(i))).errors?(s=a.errors,delete a.errors):i.errors&&(s=JSON.parse(JSON.stringify(i.errors)))),this.type="FeathersError",this.name=t,this.message=c,this.code=r,this.className=o,this.data=a,this.errors=s||{},j(this.name+"("+this.code+"): "+this.message),j(this.errors),Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=(new Error).stack}function o(e,t){n.call(this,e,"BadRequest",400,"bad-request",t)}function i(e,t){n.call(this,e,"NotAuthenticated",401,"not-authenticated",t)}function s(e,t){n.call(this,e,"PaymentError",402,"payment-error",t)}function c(e,t){n.call(this,e,"Forbidden",403,"forbidden",t)}function a(e,t){n.call(this,e,"NotFound",404,"not-found",t)}function u(e,t){n.call(this,e,"MethodNotAllowed",405,"method-not-allowed",t)}function f(e,t){n.call(this,e,"NotAcceptable",406,"not-acceptable",t)}function p(e,t){n.call(this,e,"Timeout",408,"timeout",t)}function l(e,t){n.call(this,e,"Conflict",409,"conflict",t)}function h(e,t){n.call(this,e,"LengthRequired",411,"length-required",t)}function d(e,t){n.call(this,e,"Unprocessable",422,"unprocessable",t)}function y(e,t){n.call(this,e,"TooManyRequests",429,"too-many-requests",t)}function v(e,t){n.call(this,e,"GeneralError",500,"general-error",t)}function m(e,t){n.call(this,e,"NotImplemented",501,"not-implemented",t)}function g(e,t){n.call(this,e,"BadGateway",502,"bad-gateway",t)}function b(e,t){n.call(this,e,"Unavailable",503,"unavailable",t)}var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=r(1)("@feathersjs/errors");n.prototype=Object.create(Error.prototype),Object.defineProperty(n.prototype,"toJSON",{value:function(){return{name:this.name,message:this.message,code:this.code,className:this.className,data:this.data,errors:this.errors}}}),o.prototype=n.prototype,i.prototype=n.prototype,s.prototype=n.prototype,c.prototype=n.prototype,a.prototype=n.prototype,u.prototype=n.prototype,f.prototype=n.prototype,p.prototype=n.prototype,l.prototype=n.prototype,h.prototype=n.prototype,d.prototype=n.prototype,y.prototype=n.prototype,v.prototype=n.prototype,m.prototype=n.prototype,g.prototype=n.prototype,b.prototype=n.prototype;var k={FeathersError:n,BadRequest:o,NotAuthenticated:i,PaymentError:s,Forbidden:c,NotFound:a,MethodNotAllowed:u,NotAcceptable:f,Timeout:p,Conflict:l,LengthRequired:h,Unprocessable:d,TooManyRequests:y,GeneralError:v,NotImplemented:m,BadGateway:g,Unavailable:b,400:o,401:i,402:s,403:c,404:a,405:u,406:f,408:p,409:l,411:h,422:d,429:y,500:v,501:m,502:g,503:b};e.exports=Object.assign({convert:function(e){if(!e)return e;var t=k[e.name],r=t?new t(e.message,e.data):new Error(e.message||e);return"object"===(void 0===e?"undefined":w(e))&&Object.assign(r,e),r}},k)},function(e,t,r){var n,o,i;!function(r,s){o=[],void 0!==(i="function"==typeof(n=s)?n.apply(t,o):n)&&(e.exports=i)}(0,function(){function e(e,t,r,n){return function(){var o=this._super;this._super="function"==typeof t?t:e[r];var i=n.apply(this,arguments);return this._super=o,i}}return{create:function(){var e=Object.create(this),t="string"==typeof e.__init?e.__init:"init";return"function"==typeof e[t]&&e[t].apply(e,arguments),e},mixin:"function"==typeof Object.defineProperty?function(t,r){var n=r||this,o=/\b_super\b/,i=Object.getPrototypeOf(n)||n.prototype,s={},c=t;do{Object.getOwnPropertyNames(c).forEach(function(e){s[e]||(s[e]=Object.getOwnPropertyDescriptor(c,e))})}while((c=Object.getPrototypeOf(c))&&Object.getPrototypeOf(c));return Object.keys(s).forEach(function(t){var r=s[t];"function"==typeof r.value&&o.test(r.value)&&(r.value=e(i,n[t],t,r.value)),Object.defineProperty(n,t,r)}),n}:function(t,r){var n,o=r||this,i=/\b_super\b/,s=Object.getPrototypeOf(o)||o.prototype;for(var c in t)n=o[c],("function"==typeof t[c]&&"function"==typeof s[c]||"function"==typeof n&&"function"==typeof t[c])&&i.test(t[c])?o[c]=e(s,n,c,t[c]):o[c]=t[c];return o},extend:function(e,t){return this.mixin(e,Object.create(t||this))},proxy:function(e){var t=this[e],r=Array.prototype.slice.call(arguments,1);return r.unshift(this),t.bind.apply(t,r)}}})},function(e,t,r){"use strict";var n=r(5),o=r(16),i=r(17),s=r(18);e.exports=Object.assign({},n,i,{hooks:o,filterQuery:s})},function(e,t,r){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.stripSlashes=function(e){return e.replace(/^(\/*)|(\/*)$/g,"")};var n=t._={each:function(e,t){e&&"function"==typeof e.forEach?e.forEach(t):n.isObject(e)&&Object.keys(e).forEach(function(r){return t(e[r],r)})},some:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).some(function(e){var r=e[0],n=e[1];return t(r,n)})},every:function(e,t){return Object.keys(e).map(function(t){return[e[t],t]}).every(function(e){var r=e[0],n=e[1];return t(r,n)})},keys:function(e){return Object.keys(e)},values:function(e){return n.keys(e).map(function(t){return e[t]})},isMatch:function(e,t){return n.keys(t).every(function(r){return e[r]===t[r]})},isEmpty:function(e){return 0===n.keys(e).length},isObject:function(e){return"object"===(void 0===e?"undefined":r(e))&&!Array.isArray(e)&&null!==e},extend:function(){return Object.assign.apply(Object,arguments)},omit:function(e){for(var t=n.extend({},e),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.forEach(function(e){return delete t[e]}),t},pick:function(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach(function(r){t[r]=e[r]}),t},merge:function(e,t){return n.isObject(e)&&n.isObject(t)&&Object.keys(t).forEach(function(r){if(n.isObject(t[r])){if(!e[r]){var o;Object.assign(e,(o={},o[r]={},o))}n.merge(e[r],t[r])}else{var i;Object.assign(e,(i={},i[r]=t[r],i))}}),e}};t.select=function(e){for(var t=e&&e.query&&e.query.$select,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];Array.isArray(t)&&o.length&&t.push.apply(t,o);var s=function(e){return Array.isArray(t)?n.pick.apply(n,[e].concat(t)):e};return function(e){return Array.isArray(e)?e.map(s):s(e)}},t.sorter=function(e){return function(t,r){var o=0;return n.each(e,function(e,n){e=parseInt(e,10),t[n]<r[n]&&(o-=1*e),t[n]>r[n]&&(o+=1*e)}),o}},t.isPromise=function(e){return n.isObject(e)&&"function"==typeof e.then},t.makeUrl=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="function"==typeof n.get?n.get.bind(n):function(){},i=o("env")||"production",s=o("host")||e.env.HOST_NAME||"localhost",c="development"===i||"test"===i||void 0===i?"http":"https",a=o("port")||e.env.PORT||3030;return r=r||"",c+"://"+s+("development"===i||"test"===i||void 0===i?":"+a:"")+"/"+t.stripSlashes(r)}}).call(t,r(6))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){y&&h&&(y=!1,h.length?d=h.concat(d):v=-1,d.length&&c())}function c(){if(!y){var e=o(s);y=!0;for(var t=d.length;t;){for(h=d,d=[];++v<t;)h&&h[v].run();v=-1,t=d.length}h=null,y=!1,i(e)}}function a(e,t){this.fun=e,this.array=t}function u(){}var f,p,l=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var h,d=[],y=!1,v=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new a(e,t)),1!==d.length||y||o(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,r){"use strict";e.exports="3.0.1"},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t};t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,i){var s=r[i];return n.call(e,i)?e[i]=t.merge(e[i],s,o):e[i]=s,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],s=o.obj[o.prop],c=Object.keys(s),a=0;a<c.length;++a){var u=c[a],f=s[u];"object"==typeof f&&null!==f&&-1===r.indexOf(f)&&(t.push({obj:s,prop:u}),r.push(f))}return i(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";e.exports=r(44)},function(e,t,r){"use strict";var n=r(12),o=r(2),i=r(22),s=r(32),c=r(43),a=r(45);Object.assign(n,{errors:o,authentication:i,socketio:c,primus:a,rest:s}),e.exports=n},function(e,t,r){"use strict";function n(){var e={};return o.mixin(i,e),e.init(),e}var o=r(3),i=r(13),s=r(7);n.version=s,e.exports=n,e.exports.default=n},function(e,t,r){"use strict";var n=r(1)("feathers:application"),o=r(4).stripSlashes,i=r(3),s=r(19),c=r(21),a=r(7),u=i.extend({create:null}),f={init:function(){Object.assign(this,{version:a,methods:["find","get","create","update","patch","remove"],mixins:[],services:{},providers:[],_setup:!1,settings:{}}),this.configure(c()),this.configure(s())},get:function(e){return this.settings[e]},set:function(e,t){return this.settings[e]=t,this},disable:function(e){return this.settings[e]=!1,this},disabled:function(e){return!this.settings[e]},enable:function(e){return this.settings[e]=!0,this},enabled:function(e){return!!this.settings[e]},configure:function(e){return e.call(this,this),this},service:function(e,t){if(void 0!==t)throw new Error("Registering a new service with `app.service(path, service)` is no longer supported. Use `app.use(path, service)` instead.");var r=o(e),n=this.services[r];return void 0===n&&"function"==typeof this.defaultService?this.use("/"+r,this.defaultService(r)).service(r):n},use:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e||""===o(e))throw new Error("'"+e+"' is not a valid service path.");var s=o(e),c="function"==typeof t.service&&t.services,a=this.methods.concat("setup").some(function(e){return t&&"function"==typeof t[e]});if(c){var f=t;return Object.keys(f.services).forEach(function(e){return r.use(s+"/"+e,f.service(e))}),this}if(!a)throw new Error("Invalid service object passed for path `"+s+"`");var p=u.isPrototypeOf(t)?t:u.extend(t);return n("Registering new service at `"+s+"`"),this.mixins.forEach(function(e){return e.call(r,p,s,i)}),"function"==typeof p._setup&&p._setup(this,s),this.providers.forEach(function(e){return e.call(r,p,s,i)}),this._isSetup&&"function"==typeof p.setup&&(n("Setting up service for `"+s+"`"),p.setup(this,s)),this.services[s]=p,this},setup:function(){var e=this;return Object.keys(this.services).forEach(function(t){var r=e.services[t];n("Setting up service for `"+t+"`"),"function"==typeof r.setup&&r.setup(e,t)}),this._isSetup=!0,this}};e.exports=f},function(e,t,r){function n(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function o(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(o||n);e.diff=i,e.prev=o,e.curr=n,o=n;for(var s=new Array(arguments.length),c=0;c<s.length;c++)s[c]=arguments[c];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;a++;var o=t.formatters[n];if("function"==typeof o){var i=s[a];r=o.call(e,i),s.splice(a,1),a--}return r}),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}var o;return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=n(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var r,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(15),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function r(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*f;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*c;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function n(e){return e>=u?Math.round(e/u)+"d":e>=a?Math.round(e/a)+"h":e>=c?Math.round(e/c)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,u,"day")||i(e,a,"hour")||i(e,c,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,c=60*s,a=60*c,u=24*a,f=365.25*u;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return r(e);if("number"===i&&!1===isNaN(e))return t.long?o(e):n(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";function n(e){var t=e[0],r=e[1];return{id:t,params:void 0===r?{}:r}}function o(e){var t=e[0],r=e[1],n=e[2];return{id:t,data:r,params:void 0===n?{}:n}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(5)._.each;t.converters={find:function(e){var t=e[0];return{params:void 0===t?{}:t}},create:function(e){var t=e[0],r=e[1];return{data:t,params:void 0===r?{}:r}},get:n,remove:n,update:o,patch:o},t.createHookObject=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.converters[e](r);return Object.assign(o,n,{method:e,get path(){var e=n.app,t=n.service;return t&&e&&e.services?Object.keys(e.services).find(function(r){return e.services[r]===t}):null}})},t.defaultMakeArguments=function(e){var t=[];return void 0!==e.id&&t.push(e.id),e.data&&t.push(e.data),t.push(e.params||{}),t},t.makeArguments=function(e){switch(e.method){case"find":return[e.params];case"get":case"remove":return[e.id,e.params];case"update":case"patch":return[e.id,e.data,e.params];case"create":return[e.data,e.params]}return t.defaultMakeArguments(e)},t.convertHookData=function(e){var t={};return Array.isArray(e)?t={all:e}:"object"!==(void 0===e?"undefined":i(e))?t={all:[e]}:s(e,function(e,r){t[r]=Array.isArray(e)?e:[e]}),t},t.isHookObject=function(e){return"object"===(void 0===e?"undefined":i(e))&&"string"==typeof e.method&&"string"==typeof e.type},t.getHooks=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.__hooks[r][n]||[],s=t.__hooks[r][n]||[];return o?s.concat(i):i.concat(s)},t.processHooks=function(e,r){var n=this,o=r,i=function(e){if(e){if(!t.isHookObject(e))throw new Error(o.type+" hook for '"+o.method+"' method returned invalid hook object");o=e}return o},s=Promise.resolve(o);return e.forEach(function(e){var t=e.bind(n);s=2===t.length?s.then(function(e){return new Promise(function(r,n){t(e,function(e,t){return e?n(e):r(t)})})}):s.then(t),s=s.then(i)}),s.catch(function(e){throw e.hook=o,e})},t.enableHooks=function(e,r,n){if("function"==typeof e.hooks)return e;var o={};return n.forEach(function(e){o[e]={}}),Object.defineProperty(e,"__hooks",{value:o}),Object.assign(e,{hooks:function(e){var n=this;return s(e,function(e,o){if(!n.__hooks[o])throw new Error("'"+o+"' is not a valid hook type");var i=t.convertHookData(e);s(i,function(e,t){if("all"!==t&&-1===r.indexOf(t))throw new Error("'"+t+"' is not a valid hook method")}),r.forEach(function(e){var t=n.__hooks[o][e]||(n.__hooks[o][e]=[]);i.all&&t.push.apply(t,i.all),i[e]&&t.push.apply(t,i[e])})}),this}})}},function(e,t,r){"use strict";function n(e){return"object"===(void 0===e?"undefined":o(e))&&null!==e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i={find:1,get:2,create:2,update:3,patch:3,remove:2};t.validateArguments=function(e,t){if("function"==typeof t[t.length-1])throw new Error("Callbacks are no longer supported. Use Promises or async/await instead.");var r=i[e];if(r&&t.length>r)throw new Error("Too many arguments for '"+e+"' method");var o=t[r-1];if(void 0!==o&&!n(o))throw new Error("Params for '"+e+"' method must be an object");switch(e){case"create":if(!n(t[0]))throw new Error("A data object must be provided to the 'create' method");break;case"get":case"remove":case"update":case"patch":if(void 0===t[0])throw new Error("An id must be provided to the '"+e+"' method");if(("update"===e||"patch"===e)&&!n(t[1]))throw new Error("A data object must be provided to the '"+e+"' method")}return!0}},function(e,t,r){"use strict";function n(e){if(void 0!==e)return Math.abs(parseInt(e,10))}function o(e,t){if(t&&t.default){var r="number"==typeof e?e:t.default,n="number"==typeof t.max?t.max:Number.MAX_VALUE;return Math.min(r,n)}return e}function i(e){if("object"!==(void 0===e?"undefined":s(e)))return e;var t={};return Object.keys(e).forEach(function(r){t[r]="object"===s(e[r])?e[r]:parseInt(e[r],10)}),t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=r(5)._,a=["$sort","$limit","$skip","$select","$populate"];e.exports=function(e,t){return{filters:{$sort:i(e.$sort),$limit:o(n(e.$limit),t),$skip:n(e.$skip),$select:e.$select,$populate:e.$populate},query:c.omit.apply(c,[e].concat(a))}}},function(e,t,r){"use strict";var n=r(20).EventEmitter,o=r(3),i=t.eventHook=function(){return function(e){var t=e.app,r=e.service,n=t.eventMappings[e.method],o=r._hookEvents&&-1!==r._hookEvents.indexOf(n);n&&o&&"error"!==e.type&&r.emit(n,e.result,e)}},s=t.eventMixin=function(e){if(!e._serviceEvents){var t=this,r="function"==typeof e.on&&"function"==typeof e.emit;"function"!=typeof e.mixin||r||e.mixin(n.prototype),Object.defineProperties(e,{_serviceEvents:{value:Array.isArray(e.events)?e.events.slice():[]},_hookEvents:{value:[]}}),Object.keys(t.eventMappings).forEach(function(r){var n=t.eventMappings[r],o=-1!==e._serviceEvents.indexOf(n);"function"!=typeof e[r]||o||(e._serviceEvents.push(n),e._hookEvents.push(n))})}};e.exports=function(){return function(e){Object.assign(e,{eventMappings:{create:"created",update:"updated",remove:"removed",patch:"patched"}}),e.hooks({finally:i()}),o.mixin(n.prototype,e),e.mixins.push(s)}}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,c,a,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),r.apply(this,c)}else if(i(r))for(c=Array.prototype.slice.call(arguments,1),o=(u=r.slice()).length,a=0;a<o;a++)u[a].apply(this,c);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,o,s,c;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(c=s;c-- >0;)if(r[c]===t||r[c].listener&&r[c].listener===t){o=c;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";var n=r(4),o=n.hooks,i=n.validateArguments,s=n.isPromise,c=o.createHookObject,a=o.getHooks,u=o.processHooks,f=o.enableHooks,p=o.makeArguments,l=t.hookMixin=function(e){if("function"!=typeof e.hooks){var t=this,r=t.methods,n={};f(e,r,t.hookTypes),r.forEach(function(r){"function"==typeof e[r]&&(n[r]=function(){var e=this,n=Array.from(arguments),o=!0===n[n.length-1]&&n.pop();try{i(r,n)}catch(e){return Promise.reject(e)}var f=e._super.bind(e),l=c(r,n,{type:"before",returnHook:o,service:e,app:t}),h=a(t,e,"before",r);return u.call(e,h,l).then(function(e){if(void 0!==e.result)return e;var t=f.apply(void 0,p(e));if(!s(t))throw new Error("Service method '"+e.method+"' for '"+e.path+"' service must return a promise");return t.then(function(t){return e.result=t,e})}).then(function(e){return Object.assign({},e,{type:"after"})}).then(function(n){var o=a(t,e,"after",r,!0),i=a(t,e,"finally",r,!0),s=o.concat(i);return u.call(e,s,n)}).then(function(e){return e.returnHook?e:e.result}).catch(function(n){var o=a(t,e,"error",r,!0),i=a(t,e,"finally",r,!0),s=o.concat(i),c=Object.assign({},n.hook||l,{type:"error",result:null,original:n.hook,error:n});return u.call(e,s,c).then(function(e){return c.returnHook?Promise.reject(e):e.result?Promise.resolve(e.result):Promise.reject(e.error)})})})}),e.mixin(n)}};e.exports=function(){return function(e){Object.assign(e,{hookTypes:["before","after","error","finally"]}),f(e,e.methods,e.hookTypes),e.mixins.push(l)}}},function(e,t,r){"use strict";var n=r(23),o=r(27),i={header:"Authorization",cookie:"feathers-jwt",storageKey:"feathers-jwt",jwtStrategy:"jwt",path:"/authentication",entity:"user",service:"users",timeout:5e3};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},i,e);return function(){var e=this;e.passport=new o(e,t),e.authenticate=e.passport.authenticate.bind(e.passport),e.logout=e.passport.logout.bind(e.passport),e.mixins.push(function(r){if(e.version<"3.0.0")throw new Error("This version of @feathersjs/authentication-client only works with @feathersjs/feathers v3.0.0 or later.");r.hooks({before:n.populateAccessToken(t)})}),e.rest&&e.mixins.push(function(e){e.hooks({before:n.populateHeader(t)})})}},e.exports.defaults=i},function(e,t,r){"use strict";var n={populateHeader:r(24),populateAccessToken:r(25),populateEntity:r(26)};e.exports=n},function(e,t,r){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.header)throw new Error("You need to pass 'options.header' to the populateHeader() hook.");return function(t){if("before"!==t.type)return Promise.reject(new Error("The 'populateHeader' hook should only be used as a 'before' hook."));if(t.params.accessToken){var r;t.params.headers=Object.assign({},(r={},r[e.header]=e.prefix?e.prefix+" "+t.params.accessToken:t.params.accessToken,r),t.params.headers)}return Promise.resolve(t)}}},function(e,t,r){"use strict";e.exports=function(){return function(e){var t=e.app;return"before"!==e.type?Promise.reject(new Error("The 'populateAccessToken' hook should only be used as a 'before' hook.")):(Object.assign(e.params,{accessToken:t.get("accessToken")}),Promise.resolve(e))}}},function(e,t,r){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.service)throw new Error("You need to pass 'options.service' to the populateEntity() hook.");if(!e.field)throw new Error("You need to pass 'options.field' to the populateEntity() hook.");if(!e.entity)throw new Error("You need to pass 'options.entity' to the populateEntity() hook.");return function(t){var r=t.app;return"after"!==t.type?Promise.reject(new Error("The 'populateEntity' hook should only be used as an 'after' hook.")):r.passport.verifyJWT(t.result.accessToken).then(function(t){var n=t[e.field];return n?r.service(e.service).get(n):Promise.reject(new Error("Access token payload is missing the '"+e.field+"' field."))}).then(function(n){return t.result[e.entity]=n,r.set(e.entity,n),Promise.resolve(t)})}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r(2),i=r(28),s=r(1),c=r(31),a=c.Storage,u=c.payloadIsValid,f=c.getCookie,p=c.clearCookie,l=s("@feathersjs/authentication-client");e.exports=function(){function e(t,r){if(n(this,e),t.passport)throw new Error("You have already registered authentication on this client app instance. You only need to do it once.");Object.assign(this,{options:r,app:t,payloadIsValid:u,getCookie:f,clearCookie:p,storage:t.get("storage")||this.getStorage(r.storage)}),this.setJWT=this.setJWT.bind(this),t.set("storage",this.storage),this.getJWT().then(this.setJWT),this.setupSocketListeners()}return e.prototype.setupSocketListeners=function(){var e=this,t=this.app,r=t.io||t.primus,n=t.io?"emit":"send",o=t.io?"reconnect":"reconnected";if(r){r.on(o,function(){if(l("Socket reconnected"),r.authenticated){var o={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(o,r,n).then(e.setJWT).catch(function(e){l("Error re-authenticating after socket reconnect",e),r.authenticated=!1,t.emit("reauthentication-error",e)})}});var i=function(){r.io.engine.on("upgrade",function(){if(l("Socket upgrading"),r.authenticated){var o={strategy:e.options.jwtStrategy,accessToken:t.get("accessToken")};e.authenticateSocket(o,r,n).then(e.setJWT).catch(function(e){l("Error re-authenticating after socket upgrade",e),r.authenticated=!1,t.emit("reauthentication-error",e)})}})};r.io&&r.io.engine?i():r.on("connect",i)}},e.prototype.connected=function(){var e=this,t=this.app;if(t.rest)return Promise.resolve();var r=t.io||t.primus;return r?t.io&&r.connected||t.primus&&3===r.readyState?(l("Socket already connected"),Promise.resolve(r)):new Promise(function(n,o){var i=t.primus?"open":"connect",s=t.io?"disconnect":"end",c=setTimeout(function(){l("Socket connection timed out"),o(new Error("Socket connection timed out"))},e.options.timeout);l("Waiting for socket connection");var a=function(){l("Socket disconnected before it could connect"),r.authenticated=!1};r.once(s,a),r.once(i,function(){l("Socket connected"),l("Removing "+s+" listener"),r.removeListener(s,a),clearTimeout(c),n(r)})}):Promise.reject(new Error("It looks like your client connection has not been configured."))},e.prototype.authenticate=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.app,n=Promise.resolve(t);return t.strategy||(t.accessToken?t.strategy=this.options.jwtStrategy:n=this.getJWT().then(function(t){return t?{strategy:e.options.jwtStrategy,accessToken:t}:Promise.reject(new o.NotAuthenticated("Could not find stored JWT and no authentication strategy was given"))})),n.then(function(t){return e.connected(r).then(function(n){if(r.rest)return r.service(e.options.path).create(t).then(e.setJWT);var o=r.io?"emit":"send";return e.authenticateSocket(t,n,o).then(e.setJWT)})}).then(function(e){return r.emit("authenticated",e),e})},e.prototype.authenticateSocket=function(e,t,r){var n=this;return new Promise(function(o,i){var s=setTimeout(function(){l("authenticateSocket timed out"),i(new Error("Authentication timed out"))},n.options.timeout);l("Attempting to authenticate socket"),t[r]("authenticate",e,function(e,r){if(e)return i(e);clearTimeout(s),t.authenticated=!0,l("Socket authenticated!"),o(r)})})},e.prototype.logoutSocket=function(e,t){var r=this;return new Promise(function(n,o){var i=setTimeout(function(){l("logoutSocket timed out"),o(new Error("Logout timed out"))},r.options.timeout);e[t]("logout",function(t){if(clearTimeout(i),e.authenticated=!1,t)return o(t);n()})})},e.prototype.logout=function(){var e=this,t=this.app;return t.set("accessToken",null),this.clearCookie(this.options.cookie),Promise.resolve(t.get("storage").removeItem(this.options.storageKey)).then(function(){if(t.io||t.primus){var r=t.io?"emit":"send",n=t.io?t.io:t.primus;return e.logoutSocket(n,r)}}).then(function(e){return t.emit("logout",e),e})},e.prototype.setJWT=function(e){var t=e&&e.accessToken?e.accessToken:e;return t&&(this.app.set("accessToken",t),this.app.get("storage").setItem(this.options.storageKey,t)),Promise.resolve(e)},e.prototype.getJWT=function(){var e=this,t=this.app;return new Promise(function(r,n){var o=t.get("accessToken");return o?r(o):Promise.resolve(e.storage.getItem(e.options.storageKey)).then(function(t){var n=t||e.getCookie(e.options.cookie);return n&&"null"!==n&&!e.payloadIsValid(i(n))&&(n=void 0),r(n)}).catch(n)})},e.prototype.verifyJWT=function(e){if("string"!=typeof e)return Promise.reject(new Error("Token provided to verifyJWT is missing or not a string"));try{var t=i(e);return this.payloadIsValid(t)?Promise.resolve(t):Promise.reject(new Error("Invalid token: expired"))}catch(e){return Promise.reject(new Error("Cannot decode malformed token."))}},e.prototype.getStorage=function(e){return e||new a},e}()},function(e,t,r){"use strict";function n(e){this.message=e}var o=r(29);(n.prototype=new Error).name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new n("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new n("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=n},function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r(30);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},function(e,t){function r(e){this.message=e}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,c=0,a="";i=t.charAt(c++);~i&&(o=s%4?64*o+i:i,s++%4)?a+=String.fromCharCode(255&o>>(-2*s&6)):0)i=n.indexOf(i);return a}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.Storage=function(){function e(){n(this,e),this.store={}}return e.prototype.getItem=function(e){return this.store[e]},e.prototype.setItem=function(e,t){return this.store[e]=t},e.prototype.removeItem=function(e){return delete this.store[e],this},e}(),t.payloadIsValid=function(e){return e&&(!e.exp||1e3*e.exp>(new Date).getTime())},t.getCookie=function(e){if("undefined"!=typeof document){var t=("; "+document.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()}return null},t.clearCookie=function(e){return"undefined"!=typeof document&&(document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),null}},function(e,t,r){"use strict";var n=r(33),o=r(37),i=r(38),s=r(39),c=r(40),a=r(41),u=r(0),f={jquery:n,superagent:o,request:i,fetch:s,axios:c,angular:a,angularHttpClient:r(42)};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={Base:u};return Object.keys(f).forEach(function(r){var n=f[r];t[r]=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error(r+" has to be provided to feathers-rest");var i=function(r){return new n({base:e,name:r,connection:t,options:o})},s=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.rest=t,this.defaultService=i};return s.Service=n,s.service=i,s}}),t}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=this,r=Object.assign({dataType:e.type||"json"},{headers:this.options.headers||{}},e);return e.body&&(r.data=JSON.stringify(e.body),r.contentType="application/json"),delete r.type,delete r.body,new Promise(function(e,n){t.connection.ajax(r).then(e,function(e){var t=e.responseText;try{t=JSON.parse(t)}catch(r){t=new Error(e.responseText)}t.xhr=t.response=e,n(t)})})},t}(r(0));e.exports=s},function(e,t,r){"use strict";var n=r(35),o=r(36),i=r(9);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";var n=r(8),o=r(9),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},a=function e(t,r,o,i,s,a,u,f,p,l,h,d){var y=t;if("function"==typeof u)y=u(r,y);else if(y instanceof Date)y=l(y);else if(null===y){if(i)return a&&!d?a(r,c.encoder):r;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||n.isBuffer(y))return a?[h(d?r:a(r,c.encoder))+"="+h(a(y,c.encoder))]:[h(r)+"="+h(String(y))];var v=[];if(void 0===y)return v;var m;if(Array.isArray(u))m=u;else{var g=Object.keys(y);m=f?g.sort(f):g}for(var b=0;b<m.length;++b){var w=m[b];s&&null===y[w]||(v=Array.isArray(y)?v.concat(e(y[w],o(r,w),o,i,s,a,u,f,p,l,h,d)):v.concat(e(y[w],r+(p?"."+w:"["+w+"]"),o,i,s,a,u,f,p,l,h,d)))}return v};e.exports=function(e,t){var r=e,s=t?n.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var u=void 0===s.delimiter?c.delimiter:s.delimiter,f="boolean"==typeof s.strictNullHandling?s.strictNullHandling:c.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:c.skipNulls,l="boolean"==typeof s.encode?s.encode:c.encode,h="function"==typeof s.encoder?s.encoder:c.encoder,d="function"==typeof s.sort?s.sort:null,y=void 0!==s.allowDots&&s.allowDots,v="function"==typeof s.serializeDate?s.serializeDate:c.serializeDate,m="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:c.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var g,b,w=o.formatters[s.format];"function"==typeof s.filter?r=(b=s.filter)("",r):Array.isArray(s.filter)&&(g=b=s.filter);var j=[];if("object"!=typeof r||null===r)return"";var k;k=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var O=i[k];g||(g=Object.keys(r)),d&&g.sort(d);for(var C=0;C<g.length;++C){var E=g[C];p&&null===r[E]||(j=j.concat(a(r[E],E,O,f,p,l?h:null,b,d,y,v,w,m)))}var x=j.join(u),T=!0===s.addQueryPrefix?"?":"";return x.length>0?T+x:""}},function(e,t,r){"use strict";var n=r(8),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,c=n.split(t.delimiter,s),a=0;a<c.length;++a){var u,f,p=c[a],l=p.indexOf("]="),h=-1===l?p.indexOf("="):l+1;-1===h?(u=t.decoder(p,i.decoder),f=t.strictNullHandling?null:""):(u=t.decoder(p.slice(0,h),i.decoder),f=t.decoder(p.slice(h+1),i.decoder)),o.call(r,u)?r[u]=[].concat(r[u]).concat(f):r[u]=f}return r},c=function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var i,s=e[o];if("[]"===s)i=(i=[]).concat(n);else{i=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,a=parseInt(c,10);!isNaN(a)&&s!==c&&String(a)===c&&a>=0&&r.parseArrays&&a<=r.arrayLimit?(i=[])[a]=n:i[c]=n}n=i}return n},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),a=s?n.slice(0,s.index):n,u=[];if(a){if(!r.plainObjects&&o.call(Object.prototype,a)&&!r.allowPrototypes)return;u.push(a)}for(var f=0;null!==(s=i.exec(n))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+n.slice(s.index)+"]"),c(u,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?s(e,r):e,c=r.plainObjects?Object.create(null):{},u=Object.keys(o),f=0;f<u.length;++f){var p=u[f],l=a(p,o[p],r);c=n.merge(c,l,r)}return n.compact(c)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=this.connection(e.method,e.url).set(this.options.headers||{}).set("Accept","application/json").set(e.headers||{}).type(e.type||"json");return new Promise(function(r,n){t.set(e.headers),e.body&&t.send(e.body),t.end(function(e,t){if(e){try{var o=e.response;(e=JSON.parse(e.response.text)).response=o}catch(e){}return n(e)}r(t&&t.body)})})},t}(r(0));e.exports=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=this;return new Promise(function(r,n){t.connection(Object.assign({json:!0},e),function(e,t,o){return e?n(e):!e&&t.statusCode>=400?"string"==typeof o?n(new Error(o)):(o.response=t,n(Object.assign(new Error(o.message),o))):void r(o)})})},t}(r(0));e.exports=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=Object.assign({},e);return t.headers=Object.assign({Accept:"application/json"},this.options.headers,t.headers),e.body&&(t.body=JSON.stringify(e.body)),(0,this.connection)(e.url,t).then(this.checkStatus).then(function(e){return 204===e.status?null:e.json()})},t.prototype.checkStatus=function(e){return e.ok?e:e.json().then(function(t){throw t.response=e,t})},t}(r(0));e.exports=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t={url:e.url,method:e.method,data:e.body,headers:Object.assign({Accept:"application/json"},this.options.headers,e.headers)};return this.connection.request(t).then(function(e){return e.data}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.data||t})},t}(r(0));e.exports=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=this.connection,r=this.options.Headers;if(!t||!r)throw new Error("Please pass angular's 'http' (instance) and and object with 'Headers' (class) to feathers-rest");var n=e.url,o={method:e.method,body:e.body,headers:new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers))};return new Promise(function(e,r){t.request(n,o).subscribe(e,r)}).then(function(e){return e.json()}).catch(function(e){var t=e.response||e;throw t instanceof Error?t:t.json()||t})},t}(r(0));e.exports=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.request=function(e){var t=this.connection,r=this.options.HttpHeaders;if(!t||!r)throw new Error("Please pass angular's 'httpClient' (instance) and and object with 'HttpHeaders' (class) to feathers-rest");var n=e.url,o={body:e.body,headers:new r(Object.assign({Accept:"application/json"},this.options.headers,e.headers))};return new Promise(function(r,i){t.request(e.method,n,o).subscribe(r,i)}).catch(function(e){var t=e.error;if(t)throw"string"==typeof t?JSON.parse(t):t;throw e})},t}(r(0));e.exports=s},function(e,t,r){"use strict";var n=r(10);e.exports=function(e,t){if(!e)throw new Error("Socket.io connection needs to be provided");var r=function(r){var o=this,i=Object.keys(this.eventMappings||{}).map(function(e){return o.eventMappings[e]}),s=Object.assign({},t,{events:i,name:r,connection:e,method:"emit"});return new n(s)},o=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.io=e,this.defaultService=r};return o.Service=n,o.service=r,o}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r(2).convert,i=r(1)("@feathersjs/socket-commons/client"),s=["addListener","emit","listenerCount","listeners","on","once","prependListener","prependOnceListener","removeAllListeners","removeListener"],c=["eventNames","getMaxListeners","setMaxListeners"],a=function(e){c.forEach(function(t){e[t]=function(){var e;if("function"!=typeof this.connection[t])throw new Error("Can not call '"+t+"' on the client service connection");return(e=this.connection)[t].apply(e,arguments)}}),s.forEach(function(t){e[t]=function(e){var r;if("function"!=typeof this.connection[t])throw new Error("Can not call '"+t+"' on the client service connection");var n=this.path+" "+e;i("Calling emitter method "+t+" with namespaced event '"+n+"'");for(var o=arguments.length,s=Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];var a=(r=this.connection)[t].apply(r,[n].concat(s));return a===this.connection?this:a}})};e.exports=function(){function e(t){n(this,e),this.events=t.events,this.path=t.name,this.connection=t.connection,this.method=t.method,this.timeout=t.timeout||5e3,a(this)}return e.prototype.send=function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new Promise(function(r,s){var c,a=setTimeout(function(){return s(new Error("Timeout of "+t.timeout+"ms exceeded calling "+e+" on "+t.path))},t.timeout);n.unshift(e,t.path),n.push(function(e,t){return e=o(e),clearTimeout(a),e?s(e):r(t)}),i("Sending socket."+t.method,n),(c=t.connection)[t.method].apply(c,n)})},e.prototype.find=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send("find",e.query||{})},e.prototype.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("get",e,t.query||{})},e.prototype.create=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("create",e,t.query||{})},e.prototype.update=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("update",e,t,r.query||{})},e.prototype.patch=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.send("patch",e,t,r.query||{})},e.prototype.remove=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.send("remove",e,t.query||{})},e.prototype.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("function"==typeof this.connection.off){var o;return(o=this.connection).off.apply(o,[this.path+" "+e].concat(r))}return 0===r.length?this.removeAllListeners(e):this.removeListener.apply(this,[e].concat(r))},e}()},function(e,t,r){"use strict";var n=r(10);e.exports=function(e,t){if(!e)throw new Error("Primus connection needs to be provided");var r=function(r){return new n(Object.assign({},t,{name:r,connection:e,method:"send"}))},o=function(){if("function"==typeof this.defaultService)throw new Error("Only one default client provider can be configured");this.primus=e,this.defaultService=r};return o.Service=n,o.service=r,o}}])});